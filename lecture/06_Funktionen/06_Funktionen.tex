% !TeX document-id = {d2a98428-ee0e-4def-9f4b-378c042e42ba}
% !TeX TXS-program:compile = txs:///pdflatex/[--shell-escape]
% !TeX root = 06_Funktionen.tex
\input{../global.tex}


\begin{document}
%Deckblatt
\subtitle{Kapitel 6: wie Funktionen funktionieren}
\titlegraphic{
    \begin{columns}
        \begin{column}{10cm}
            %\vspace{1.5cm}
            \begin{center}
                {\huge Funktionen}
            \end{center}
            \begin{figure}
                \centering
                \includeinvertablegraphics[scale=.4]{media/proofs.png}
                \\	\sffamily \tiny Bild: \href{https://xkcd.com/1724/}{https://xkcd.com/1724/}
            \end{figure}
        \end{column}
    \end{columns}}
\maketitle

\section{Schlechtes Beispiel}
\begin{frame}[c]
    \slidehead
    \kotlinfile{listings/beispiel_schlecht.py}
    \small (Namen generiert auf www.listofrandomnames.com)
\end{frame}


\section{Gutes Beispiel}
\begin{frame}
    \slidehead
    \kotlinfile{listings/beispiel_gut.py}
\end{frame}

\section{Idee von Funktionen}
\begin{frame}
    \slidehead

    \begin{itemize}
        \item Funktionalität \textbf{kapseln}: An einer Stelle zusammengefasst
        \item Weniger \textbf{Redundanz}: Keinen Code doppelt schreiben
        \item Einmal Code schreiben, danach nur an diese Stelle verweisen
    \end{itemize}
    \vspace{1cm}
    \begin{block}{Hinweis}
        Einige Funktionen haben wir schon kennengelernt, z.B. \pythoninline{print("Hello World")}
    \end{block}
\end{frame}

\subtitle{Kapitel 6: wie Funktionen funktionieren}

\section{Woraus besteht eine Funktion?}
\begin{frame}[c]
    \slidehead
    \begin{itemize}[<+->]
        \item Syntax: \kotlinfile{listings/fun_syntax.py}
        \item Beispiel: \kotlinfile{listings/fun_syntax_concrete.py}
    \end{itemize}
\end{frame}

\subsection{Return-Statement}
\begin{frame}
    \slidehead
    \begin{itemize}
        \item Funktionen können Rückgabewerte haben
        \item Der Rückgabetyp muss im Methodenkopf stehen
        \item Dazu wird \kotlininline{return} gefolgt vom Rückgabewert geschrieben
            \pause
        \item Syntax \kotlinfile{listings/fun_syntax_return.py}
    \end{itemize}
\end{frame}

\begin{frame}
    \slidehead
    \kotlinfile{listings/fun_example_return_block.py}
    \pause
    Funktionen, die nur die \kotlininline{return}-Anweisung haben, können auch so geschrieben werden
    \kotlinfile{listings/fun_example_return_expression.py}
\end{frame}

\livecoding

\subtitle{Kapitel 6: wie Funktionen funktionieren}

\section{Fallbeispiel: Geometrie}
\begin{frame}[c]
    \slidehead

    \begin{figure}
        \centering
        %Hinweis: dieses Bild wurde von uns erstellt und kann ohne Referenz verwendet werden.
        %Viele Grüße
        %Kevin
        \includeinvertablegraphics[width=0.8\textheight]{geometrie}
    \end{figure}

\end{frame}

\subsection{Flächeninhalt eines Kreises}
\begin{frame}
    \slidehead
    \kotlinfile{listings/bsp_geometrie_schlecht.py}

    \begin{block}{Problem}
        Immer, wenn irgendwo der Flächeninhalt gebraucht wird, muss er neu geschrieben werden $\Rightarrow$ Viel Code und viele mögliche Fehlerquellen
    \end{block}
\end{frame}

\begin{frame}
    \slidehead
    \vspace{-1ex}
    \begin{onlyenv}<1>
        \kotlinfile{listings/bsp_geometrie_1.py}
    \end{onlyenv}

    \begin{onlyenv}<2>
        \kotlinfile{listings/bsp_geometrie_2.py}
    \end{onlyenv}
    \pause
    In diesem Beispiel, ist \kotlininline{r} ein \textbf{Parameter} und \kotlininline{radius} das \textbf{Argument} für \kotlininline{r}
\end{frame}

\subsection{Wiederverwendbarkeit}
\begin{frame}
    \slidehead
    \vspace{-1ex}
    \kotlinfile[][top=0cm,bottom=0cm]{listings/reusability.py}
    \vspace{-1ex}
    \begin{block}{Hinweis}
        Nun kann die Funktion auch in anderen Funktionen verwendet werden.
        Bei Änderungen muss nur eine Stelle geändert werden.
    \end{block}
\end{frame}

\section{Vorteile von Funktionen}
\begin{frame}
    \slidehead

    \begin{itemize}
        \item \textbf{Wiederverwendung} von Code $\Rightarrow$ Weniger Code schreiben
        \item \textbf{Redundanz} im Code verringern $\Rightarrow$ Veränderungen nur an einer Stelle
        \item \textbf{Blackbox}-Prinzip $\Rightarrow$ Details verstecken
    \end{itemize}
\end{frame}

\livecoding

%Deckblatt
\subtitle{Kapitel 6: wie Funktionen funktionieren}

\section{Scope}
\subsection{Lokale Variablen}
\begin{frame}[fragile]
    \slidehead
    \vspace{-1em}
    \kotlinfile{listings/scope_1.py}
    \pause
    \vspace{-1em}
    %\begin{noindent}
    \begin{commandshell}[fontsize=\footnotesize][minted language=text,top=0cm,bottom=0cm]
        Traceback (most recent call last):
        File "scope_1.py", line 5, in <module>
            print(variable)
                ^^^^^^^^
        NameError: name 'variable' is not defined. Did you mean: 'callable'?
    \end{commandshell}
    %\end{noindent}
    \vspace{-1em}
    \begin{block}{Hinweis:}
        Variablen, die innerhalb einer Funktion erstellt werden, werden gelöscht, sobald die Funktion endet.
        Diese Variablen heißen \textbf{lokale Variablen}.
    \end{block}
\end{frame}

\subsection{Globale Variablen}
\begin{frame}
    \slidehead
    \kotlinfile{listings/scope_2.py}
    \begin{itemize}
        \item Variablen die außerhalb von Funktionen erstellt wurden, werden als \textbf{globale Variablen} bezeichnet
        \item Auf globale Variablen kann auch in Funktionen zugegriffen werden
    \end{itemize}
\end{frame}

\begin{frame}
    \slidehead
    \kotlinfile{listings/scope_3.py}
    \begin{itemize}
        \item Die globale Variable \kotlininline{zahl} bleibt unverändert
        \item Es wird eine lokale Variable mit dem \textit{gleichen} Namen erstellt
    \end{itemize}
\end{frame}

\livecoding

\subtitle{Kapitel 6: wie Funktionen funktionieren}

\section{Rekursion}
\begin{frame}[t]
    \slidehead

    \vskip -18 pt
    \begin{columns}
        \begin{column}{4.5cm}
            \vskip 5 pt
            \begin{itemize}
                \item Funktionen können sich selbst aufrufen
            \end{itemize}
        \end{column}

        \begin{column}{7cm}
            \begin{figure}
                \IfFileExists{\jobname_tmp.pdf}{
                    \includegraphics[width=\textwidth,page=24]{\jobname_tmp.pdf}
                }{}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}[t]
    \slidehead

    \begin{itemize}
        \item Funktionen können sich mehrfach selbst aufrufen
    \end{itemize}

    \begin{columns}
        \begin{column}{5cm}
            \begin{figure}
                \IfFileExists{\jobname_tmp.pdf}{
                    \includegraphics[width=\textwidth,page=25]{\jobname_tmp.pdf}
                }{}
            \end{figure}
        \end{column}

        \begin{column}{5cm}
            \begin{figure}
                \IfFileExists{\jobname_tmp.pdf}{
                    \includegraphics[width=\textwidth,page=25]{\jobname_tmp.pdf}
                }{}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}

\subsection*{Beispiel}
\begin{frame}
    \slidehead

    \begin{itemize}
        \item Fibonacci-Zahlen: \texttt{1, 1, 2, 3, 5, 8, 13, 8+13 = 21, ...}
            \begin{onlyenv}<1>
                \kotlinfile{listings/bsp_recursion_1.py}
            \end{onlyenv}

            \begin{onlyenv}<2>
                \kotlinfile{listings/bsp_recursion_2.py}
            \end{onlyenv}

        \item<2> Rekursionsanker sorgt für den Abbruch
    \end{itemize}

\end{frame}

\subsection{Rekursionsbaum}

%The biggest Latex Monstrosity ever conceived:
%greetings
%Kevin O.
\newcommand{\mytree}{
    \ifnum \val = 0
        \draw[draw=., ultra thick] (\x,\y) rectangle 	++(0.75,0.75);
        \node at (\x+0.375,\y+0.375) {f(\the\val)};
    \fi
    \ifnum \val = 1
        \draw[draw=., ultra thick] (\x,\y) rectangle 	++(0.75,0.75);
        \node at (\x+0.375,\y+0.375) {f(\the\val)};
    \fi
    \ifnum \val > 1

        \draw[draw=., ultra thick] (\x,\y) rectangle ++(0.75,0.75);
        \node at (\x+0.375,\y+0.375) {f(\the\val)};

        \advance \val -1
        \advance \y -2
        \tmp=-\val*0.01
        \advance \tmp -1

        \advance \x \tmp
        \draw [->, thick] (\x-\tmp,\y+2) -- (\x+0.75,\y+0.75);
        \mytree;

        \tmp=\val*0.01
        \advance \tmp 1

        \advance \x \tmp
        \advance \val -1
        \tmp=\val*0.01
        \advance \tmp 1

        \advance \x \tmp

        \draw [->, thick] (\x-\tmp+0.75,\y+2) -- (\x,\y+0.75);
        \mytree;

        %everything back to normal
        \tmp=-\val*0.01
        \advance \tmp -1

        \advance \val +2
        \advance \x \tmp
        \advance \y +2
    \fi
}


\begin{frame}
    \slidehead
    \centering
    \vspace{-0.1cm}
    \begin{tikzpicture}[scale=.9, every node/.style={scale=1}]
        \newcount\val
        \newcount\x
        \newcount\y
        \newcount\tmp
        \val=4;
        \x=0;
        \y=0;
        \mytree;
    \end{tikzpicture}
\end{frame}

\subsection{Rekursive Summe in Kotlin}
\begin{frame}
    \slidehead

    \begin{itemize}
        \item Aufgabe: Zahlen von 1 bis 4 zusammenzählen: \texttt{sum(4)} \pause
        \item \texttt{= 1 + 2 + 3 + 4} \pause
        \item \texttt{= (1 + 2 + 3) + 4} \pause
        \item \texttt{= sum(3) + 4}
    \end{itemize}
    \vspace{1em}
    \pause
    \kotlinfile{listings/recursiveSum.py}
\end{frame}

\livecoding


\subsection{}

\section{Quiz}
\begin{frame}
    \slidehead
    \begin{itemize}
        \item Was bedeutet Kapseln?
            \pause
        \item Was ist ein Parameter?
            Was ist ein Argument?
            Wie untescheiden sie sich?
            \pause
        \item Darf ich meine Funktion \kotlininline{while} nennen?
            \pause
        \item Braucht eine Funktion ein \kotlininline{return}-Statement?
            \pause
        \item Solltet ihr alle zur Ophase gehen?
    \end{itemize}
\end{frame}

\section{Fragen und Sonstiges}
\begin{frame}
    \slidehead
    \vspace{1.8cm}
    \centering
    \huge Noch Fragen?
\end{frame}

\section{}
\subsection{}

\begin{frame}
    \slidehead
    \vspace{1.8cm}
    \centering
    \huge Danke fürs Teilnehmen und Viel Erfolg im Studium.
\end{frame}

\end{document}
