
%include guard:
\ifdefined\GlobalAlreadyIncluded
  \expandafter\endinput
\fi

\gdef\GlobalAlreadyIncluded{}
%

\documentclass[accentcolor=3c,landscape,ngerman,presentation,t,usenames,dvipsnames,svgnames,table, aspectratio=169]{tudabeamer}

% Template-Modifikationen
\addtobeamertemplate{frametitle}{}{\vspace{-1em}} % mehr Platz vor dem Inhalt

% andere global gemeinsame definitionen
\input{../../shared/globalCommon.tex}

%Includes
\usepackage{epstopdf}
\usepackage{wrapfig}
\usepackage{tipa}
\usepackage{tikz}
\usetikzlibrary{calc,shapes,arrows}
%tip: use http://l04.scarfboy.com/coding/phonetic-translation?from=ipa&fromtext=%CB%88pa%C9%AA%CE%B8n%CC%A9&to=tipa
%for converting ipa

\graphicspath{ {./media/} }

\def\shortyear#1{\expandafter\shortyearhelper#1}
\def\shortyearhelper#1#2#3#4{#3#4}

\newcount\NextYear
\NextYear = \year
\advance\NextYear by 1

\newcommand\NextYearShort{\shortyear{\the\NextYear}}

% notes
\usepackage{pgfpages}
\setbeamertemplate{note page}[plain]
%\setbeameroption{show notes on second screen}

% macro for change speaker sign
\newcommand{\changespeaker}{
	\begin{tikzpicture}[line width=.6mm, shorten >= 3pt, shorten <= 3pt]

		\coordinate (c1);
		\coordinate[right of=c1] (c2);

		\draw[rectangle, draw=red!80, fill=red!80, align=center, rounded corners] ($(c1.north west)+(0,-0.3)$) rectangle ($(c2.south east)+(0, 0.3)$) {};
		\draw[->,white] (c1)[bend left] to node[auto] {} (c2);
		\draw[->,white] (c2)[bend left] to node[auto] {} (c1);
	\end{tikzpicture}
}

%Listing-Style pyhon
\title[Programmiervorkurs]{Programmiervorkurs Wintersemester \the\year/\NextYearShort}
\subtitle{{\small der Fachschaft Informatik}}
\logo*{\includegraphics{../globalMedia/bildmarke_ohne_rand}}
\institute{Fachschaft Informatik}
\date{Wintersemester \the\year/\NextYearShort}


% macros
\newcommand{\livecoding}{
		\ifdefined\StreamSlides
			\begin{frame}
				\frametitle{\insertsectionhead \\  {\small \insertsubsectionhead}}\centering \huge 	\vskip 2cm\textbf{\textcolor{red}{Live-Coding}}
			\end{frame}
		\fi
	}

%\newcommand{\slidehead}{\frametitle{\insertsectionhead \\ {\small \insertsubsectionhead}}\vspace{3mm}}
\newcommand{\slidehead}{\frametitle{\insertsectionhead} \framesubtitle{\insertsubsectionhead}\vspace{3mm}}
\newcommand{\tocslide}{\begin{frame}[t]\frametitle{Inhaltsverzeichnis}\vspace{3mm}{\small\tableofcontents[subsectionstyle=shaded]}\end{frame}}

\newcommand{\nextvid}[2]{
	\ifdefined\StreamSlides
	\else
		\section{Nächstes Video}
		\begin{frame}[t]
			\slidehead
			\begin{block}{Nächstes Video}
				\vspace{0.5cm}
				#1
				\vspace{0.5cm}
			\end{block}
			\ifx\hfuzz#2\hfuzz
				\vspace{2.5cm}
			\else
				{\begin{block}{Bonus Video}
					\vspace{0.5cm}
					#2
					\vspace{0.5cm}
				\end{block}}
			\fi
			Danke fürs Zuschauen!\\
			Links zu den Folien und Quellen sind in der Videobeschreibung.
		\end{frame}
	\fi
}


\usepackage{verbatim}
\usetikzlibrary{decorations.pathreplacing}
\usetikzlibrary{shapes.misc}


% colors
\definecolor{lightpetrol}{RGB}{0,223,194}

% dark Mode
\ExplSyntaxOn
\RequirePackage{pagecolor,xcolor, graphicx} % Used for dark Mode
\bool_gset_false:N \g_dark_mode_bool % Disable by default
\newcommand{\enableDarkMode}{ %Command to enable Dark Mode
	\pagecolor{black}
	\color{white}
	\setbeamercolor*{smallrule}{bg=white}
	\setbeamercolor*{normal~text}{bg=,fg=white}
	\setbeamercolor*{background canvas}{parent=normal~text}
	\setbeamercolor*{section~in~toc}{parent=normal~text}
	\setbeamercolor*{subsection~in~toc}{parent=normal~text,fg=black}
	\setbeamertemplate{subsection~in~toc~shaded}[default][50]
	\setbeamercolor*{footline}{parent=normal~text}
	\setbeamercolor{block~title~alerted}{fg=white,bg=white!20!black}
	\setbeamercolor*{block~body}{bg=white!10!black}
	\setbeamercolor*{block~body~alerted}{bg=black}
	\bool_gset_true:N \g_dark_mode_bool
	\IfFileExists{tuda_logo_inverted.pdf}{\tl_gset:Nn \g_ptxcd_logofile_tl {tuda_logo_inverted.pdf}}{} % Prefer inverted Logo with dark Mode
	\hbox_gset:Nn \g__ptxcd_logo_box {% Update Logo Box
		\makebox[2.2\c_ptxcd_logoheight_dim][l]{\includegraphics[height=\c_ptxcd_logoheight_dim]{\g_ptxcd_logofile_tl}}%
	}
}

\prg_new_conditional:Nnn \__ptxcd_if_dark_mode: {T,F,TF} { % Conditional to check if dark Mode is active
	\bool_if:NTF \g_dark_mode_bool
	{\prg_return_true:}
	{\prg_return_false:}
}

\cs_set_eq:NN\IfDarkModeT \__ptxcd_if_dark_mode:T % Easy dark Mode check for use in document
\cs_set_eq:NN\IfDarkModeF \__ptxcd_if_dark_mode:F
\cs_set_eq:NN\IfDarkModeTF \__ptxcd_if_dark_mode:TF

\newcommand{\includeinvertablegraphics}[2][]{% Grafik wird beim Dark Mode automatisch Invertiert (rgb)
	\IfDarkModeTF{\includegraphics[decodearray={1.0~0.0~1.0~0.0~1.0~0.0},#1]{#2}}{\includegraphics[#1]{#2}}
}
\newcommand{\includeinvertablegrayscalegraphics}[2][]{% Grafik wird beim Dark Mode automatisch Invertiert (grayscale)
\IfDarkModeTF{\includegraphics[decodearray={1.0 0.0},#1]{#2}}{\includegraphics[#1]{#2}}
}

\sys_get_shell:nnN { kpsewhich ~ --var-value ~ DARK_MODE } { } \l_dark_mode_env_var_tl
\tl_trim_spaces:N \l_dark_mode_env_var_tl
\tl_if_eq:NnT \l_dark_mode_env_var_tl {1} {\enableDarkMode{}}
\ExplSyntaxOff